import accessibleAutocomplete from 'accessible-autocomplete';

document.addEventListener('DOMContentLoaded', () => {
  // Full Local Authorities list
  const LA_SOURCE = Array.from(new Set([
    // ---------------------------
    // ENGLAND — COUNTY COUNCILS
    // ---------------------------
    'Cambridgeshire County Council',
    'Derbyshire County Council',
    'Devon County Council',
    'East Sussex County Council',
    'Essex County Council',
    'Gloucestershire County Council',
    'Hampshire County Council',
    'Hertfordshire County Council',
    'Kent County Council',
    'Lancashire County Council',
    'Leicestershire County Council',
    'Lincolnshire County Council',
    'Norfolk County Council',
    'Nottinghamshire County Council',
    'Oxfordshire County Council',
    'Staffordshire County Council',
    'Suffolk County Council',
    'Surrey County Council',
    'Warwickshire County Council',
    'West Sussex County Council',
    'Worcestershire County Council',

    // ----------------------------------------------------------
    // ENGLAND — UNITARY AUTHORITIES (incl. City & Isles of Scilly)
    // ----------------------------------------------------------
    'Bath and North East Somerset Council',
    'Bedford Borough Council',
    'Blackburn with Darwen Borough Council',
    'Blackpool Council',
    'Bournemouth, Christchurch and Poole Council',
    'Bracknell Forest Borough Council',
    'Brighton & Hove City Council',
    'Bristol City Council',
    'Buckinghamshire Council',
    'Central Bedfordshire Council',
    'Cheshire East Council',
    'Cheshire West and Chester Council',
    'Cornwall Council',
    'Darlington Borough Council',
    'Derby City Council',
    'Dorset Council',
    'Durham County Council',
    'East Riding of Yorkshire Council',
    'Herefordshire Council',
    'Hartlepool Borough Council',
    'Isle of Wight Council',
    'Kingston upon Hull City Council',
    'Leicester City Council',
    'Luton Borough Council',
    'Medway Council',
    'Middlesbrough Council',
    'Milton Keynes City Council',
    'North East Lincolnshire Council',
    'North Lincolnshire Council',
    'North Somerset Council',
    'Northumberland County Council',
    'Nottingham City Council',
    'Peterborough City Council',
    'Plymouth City Council',
    'Portsmouth City Council',
    'Reading Borough Council',
    'Redcar and Cleveland Borough Council',
    'Rutland County Council',
    'Shropshire Council',
    'Slough Borough Council',
    'Somerset Council',
    'South Gloucestershire Council',
    'Southampton City Council',
    'Southend-on-Sea City Council',
    'Stockton-on-Tees Borough Council',
    'Stoke-on-Trent City Council',
    'Swindon Borough Council',
    'Telford and Wrekin Council',
    'Thurrock Council',
    'Torbay Council',
    'Warrington Borough Council',
    'West Berkshire Council',
    'West Northamptonshire Council',
    'Westmorland and Furness Council',
    'Wiltshire Council',
    'Windsor and Maidenhead Borough Council',
    'Wokingham Borough Council',
    'City of York Council',
    'Cumberland Council',
    'North Yorkshire Council',
    'City of London Corporation',
    'Council of the Isles of Scilly',

    // ---------------------------------
    // ENGLAND — LONDON BOROUGH COUNCILS
    // ---------------------------------
    'Barking and Dagenham London Borough Council',
    'Barnet London Borough Council',
    'Bexley London Borough Council',
    'Brent London Borough Council',
    'Bromley London Borough Council',
    'Camden London Borough Council',
    'Croydon London Borough Council',
    'Ealing London Borough Council',
    'Enfield London Borough Council',
    'Greenwich London Borough Council',
    'Hackney London Borough Council',
    'Hammersmith and Fulham London Borough Council',
    'Haringey London Borough Council',
    'Harrow London Borough Council',
    'Havering London Borough Council',
    'Hillingdon London Borough Council',
    'Hounslow London Borough Council',
    'Islington London Borough Council',
    'Kensington and Chelsea London Borough Council',
    'Kingston upon Thames London Borough Council',
    'Lambeth London Borough Council',
    'Lewisham London Borough Council',
    'Merton London Borough Council',
    'Newham London Borough Council',
    'Redbridge London Borough Council',
    'Richmond upon Thames London Borough Council',
    'Southwark London Borough Council',
    'Sutton London Borough Council',
    'Tower Hamlets London Borough Council',
    'Waltham Forest London Borough Council',
    'Wandsworth London Borough Council',
    'Westminster City Council',

    // ----------------------------------------------
    // ENGLAND — METROPOLITAN BOROUGH (MET DISTRICTS)
    // ----------------------------------------------
    'Barnsley Metropolitan Borough Council',
    'Birmingham City Council',
    'Bolton Metropolitan Borough Council',
    'Bradford City Council',
    'Bury Metropolitan Borough Council',
    'Calderdale Metropolitan Borough Council',
    'Coventry City Council',
    'Doncaster Metropolitan Borough Council',
    'Dudley Metropolitan Borough Council',
    'Gateshead Metropolitan Borough Council',
    'Kirklees Metropolitan Borough Council',
    'Knowsley Metropolitan Borough Council',
    'Leeds City Council',
    'Liverpool City Council',
    'Manchester City Council',
    'Newcastle upon Tyne City Council',
    'North Tyneside Metropolitan Borough Council',
    'Oldham Metropolitan Borough Council',
    'Rochdale Metropolitan Borough Council',
    'Rotherham Metropolitan Borough Council',
    'Salford City Council',
    'Sandwell Metropolitan Borough Council',
    'Sefton Metropolitan Borough Council',
    'Sheffield City Council',
    'Solihull Metropolitan Borough Council',
    'South Tyneside Metropolitan Borough Council',
    'Sunderland City Council',
    'Tameside Metropolitan Borough Council',
    'Trafford Metropolitan Borough Council',
    'Wakefield Council',
    'Walsall Metropolitan Borough Council',
    'Wirral Metropolitan Borough Council',
    'Wolverhampton City Council',
    'Stockport Metropolitan Borough Council',
    'Wigan Metropolitan Borough Council',
    'Southampton City Council', // (appears above as unitary, retained here per your list)

    // -------------------------------------------------------------------
    // ENGLAND — NON-METROPOLITAN DISTRICTS / BOROUGH & CITY COUNCILS
    // -------------------------------------------------------------------
    // Cambridgeshire
    'Cambridge City Council',
    'East Cambridgeshire District Council',
    'Fenland District Council',
    'Huntingdonshire District Council',
    'South Cambridgeshire District Council',

    // Derbyshire
    'Amber Valley Borough Council',
    'Bolsover District Council',
    'Chesterfield Borough Council',
    'Derbyshire Dales District Council',
    'Erewash Borough Council',
    'High Peak Borough Council',
    'North East Derbyshire District Council',
    'South Derbyshire District Council',

    // Devon
    'East Devon District Council',
    'Exeter City Council',
    'Mid Devon District Council',
    'North Devon Council',
    'South Hams District Council',
    'Teignbridge District Council',
    'Torridge District Council',
    'West Devon Borough Council',

    // East Sussex
    'Eastbourne Borough Council',
    'Hastings Borough Council',
    'Lewes District Council',
    'Rother District Council',
    'Wealden District Council',

    // Essex
    'Basildon Borough Council',
    'Braintree District Council',
    'Brentwood Borough Council',
    'Castle Point Borough Council',
    'Chelmsford City Council',
    'Colchester City Council',
    'Epping Forest District Council',
    'Harlow District Council',
    'Maldon District Council',
    'Rochford District Council',
    'Tendring District Council',
    'Uttlesford District Council',

    // Gloucestershire
    'Cheltenham Borough Council',
    'Cotswold District Council',
    'Forest of Dean District Council',
    'Gloucester City Council',
    'Stroud District Council',
    'Tewkesbury Borough Council',

    // Hampshire
    'Basingstoke and Deane Borough Council',
    'East Hampshire District Council',
    'Eastleigh Borough Council',
    'Fareham Borough Council',
    'Gosport Borough Council',
    'Hart District Council',
    'Havant Borough Council',
    'New Forest District Council',
    'Rushmoor Borough Council',
    'Test Valley Borough Council',
    'Winchester City Council',

    // Hertfordshire
    'Broxbourne Borough Council',
    'Dacorum Borough Council',
    'East Hertfordshire District Council',
    'Hertsmere Borough Council',
    'North Hertfordshire Council',
    'St Albans City and District Council',
    'Stevenage Borough Council',
    'Three Rivers District Council',
    'Watford Borough Council',
    'Welwyn Hatfield Borough Council',

    // Kent
    'Ashford Borough Council',
    'Canterbury City Council',
    'Dartford Borough Council',
    'Dover District Council',
    'Folkestone & Hythe District Council',
    'Gravesham Borough Council',
    'Maidstone Borough Council',
    'Sevenoaks District Council',
    'Swale Borough Council',
    'Thanet District Council',
    'Tonbridge and Malling Borough Council',
    'Tunbridge Wells Borough Council',

    // Lancashire
    'Burnley Borough Council',
    'Chorley Council',
    'Fylde Council',
    'Hyndburn Borough Council',
    'Lancaster City Council',
    'Pendle Borough Council',
    'Preston City Council',
    'Ribble Valley Borough Council',
    'Rossendale Borough Council',
    'South Ribble Borough Council',
    'West Lancashire Borough Council',
    'Wyre Council',

    // Leicestershire
    'Blaby District Council',
    'Charnwood Borough Council',
    'Harborough District Council',
    'Hinckley & Bosworth Borough Council',
    'Melton Borough Council',
    'North West Leicestershire District Council',
    'Oadby and Wigston Borough Council',

    // Lincolnshire
    'Boston Borough Council',
    'East Lindsey District Council',
    'City of Lincoln Council',
    'North Kesteven District Council',
    'South Holland District Council',
    'South Kesteven District Council',
    'West Lindsey District Council',

    // Norfolk
    'Breckland Council',
    'Broadland District Council',
    'Great Yarmouth Borough Council',
    'King’s Lynn and West Norfolk Borough Council',
    'North Norfolk District Council',
    'Norwich City Council',
    'South Norfolk Council',

    // Nottinghamshire
    'Ashfield District Council',
    'Bassetlaw District Council',
    'Broxtowe Borough Council',
    'Gedling Borough Council',
    'Mansfield District Council',
    'Newark and Sherwood District Council',
    'Rushcliffe Borough Council',

    // Oxfordshire
    'Cherwell District Council',
    'Oxford City Council',
    'South Oxfordshire District Council',
    'Vale of White Horse District Council',
    'West Oxfordshire District Council',

    // Staffordshire
    'Cannock Chase District Council',
    'East Staffordshire Borough Council',
    'Lichfield District Council',
    'Newcastle-under-Lyme Borough Council',
    'South Staffordshire Council',
    'Stafford Borough Council',
    'Staffordshire Moorlands District Council',
    'Tamworth Borough Council',

    // Suffolk
    'Babergh District Council',
    'East Suffolk Council',
    'Ipswich Borough Council',
    'Mid Suffolk District Council',
    'West Suffolk Council',

    // Surrey
    'Elmbridge Borough Council',
    'Epsom and Ewell Borough Council',
    'Guildford Borough Council',
    'Mole Valley District Council',
    'Reigate & Banstead Borough Council',
    'Runnymede Borough Council',
    'Spelthorne Borough Council',
    'Surrey Heath Borough Council',
    'Tandridge District Council',
    'Waverley Borough Council',
    'Woking Borough Council',

    // Warwickshire
    'North Warwickshire Borough Council',
    'Nuneaton and Bedworth Borough Council',
    'Rugby Borough Council',
    'Stratford-on-Avon District Council',
    'Warwick District Council',

    // West Sussex
    'Adur District Council',
    'Arun District Council',
    'Chichester District Council',
    'Crawley Borough Council',
    'Horsham District Council',
    'Mid Sussex District Council',
    'Worthing Borough Council',

    // Worcestershire
    'Bromsgrove District Council',
    'Malvern Hills District Council',
    'Redditch Borough Council',
    'Worcester City Council',
    'Wychavon District Council',
    'Wyre Forest District Council',

    // ----------
    // SCOTLAND
    // ----------
    'Aberdeen City Council',
    'Aberdeenshire Council',
    'Angus Council',
    'Argyll and Bute Council',
    'City of Edinburgh Council',
    'Clackmannanshire Council',
    'Dumfries and Galloway Council',
    'Dundee City Council',
    'East Ayrshire Council',
    'East Dunbartonshire Council',
    'East Lothian Council',
    'East Renfrewshire Council',
    'Falkirk Council',
    'Fife Council',
    'Glasgow City Council',
    'Highland Council',
    'Inverclyde Council',
    'Midlothian Council',
    'Moray Council',
    'Na h-Eileanan Siar Council',
    'North Ayrshire Council',
    'North Lanarkshire Council',
    'Orkney Islands Council',
    'Perth and Kinross Council',
    'Renfrewshire Council',
    'Scottish Borders Council',
    'Shetland Islands Council',
    'South Ayrshire Council',
    'South Lanarkshire Council',
    'Stirling Council',
    'West Dunbartonshire Council',
    'West Lothian Council',

    // -----
    // WALES
    // -----
    'Blaenau Gwent County Borough Council',
    'Bridgend County Borough Council',
    'Caerphilly County Borough Council',
    'Cardiff Council',
    'Carmarthenshire County Council',
    'Ceredigion County Council',
    'Conwy County Borough Council',
    'Denbighshire County Council',
    'Flintshire County Council',
    'Gwynedd Council',
    'Isle of Anglesey County Council',
    'Merthyr Tydfil County Borough Council',
    'Monmouthshire County Council',
    'Neath Port Talbot County Borough Council',
    'Newport City Council',
    'Pembrokeshire County Council',
    'Powys County Council',
    'Rhondda Cynon Taf County Borough Council',
    'Swansea Council',
    'Torfaen County Borough Council',
    'Vale of Glamorgan Council',
    'Wrexham County Borough Council',

    // -------------------
    // NORTHERN IRELAND
    // -------------------
    'Antrim and Newtownabbey Borough Council',
    'Ards and North Down Borough Council',
    'Armagh City, Banbridge and Craigavon Borough Council',
    'Belfast City Council',
    'Causeway Coast and Glens Borough Council',
    'Derry City and Strabane District Council',
    'Fermanagh and Omagh District Council',
    'Lisburn and Castlereagh City Council',
    'Mid and East Antrim Borough Council',
    'Mid Ulster District Council',
    'Newry, Mourne and Down District Council'
  ].map(s => s.trim()).filter(Boolean)));

  // Initialise the autocomplete with the id the page script expects
  accessibleAutocomplete({
    element: document.querySelector('#autocomplete-container'),
    id: 'my-autocomplete',
    source: LA_SOURCE
  });

  // Expose the list for the validator (mirror of your pollutants page approach)
  sessionStorage.setItem('allLocalAuthorities', JSON.stringify(LA_SOURCE));
  window.ALL_LOCAL_AUTHORITIES = LA_SOURCE;
});
