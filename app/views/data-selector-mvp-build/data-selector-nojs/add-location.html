{% extends "layouts/data-selector-mvp.html" %}

{% set pageName="Add location(s)" %}

{% block beforeContent %}
{{ govukPhaseBanner({
  tag: { text: "Beta" },
  html: 'This is a new service. Help us improve it and <a class="govuk-link" href="#">give your feedback (opens in new tab)</a>.'
}) }}
<a href="create-pollutant.html" class="govuk-back-link">Back</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-l">Add location(s)</h1>

    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset" aria-describedby="location-hint">
        <div id="location-hint" class="govuk-hint">Select one option</div>

        <div class="govuk-radios" data-module="govuk-radios">
          <!-- Countries -->
          <div class="govuk-radios__item">
            <input class="govuk-radios__input"
                   id="location-2"
                   name="location"
                   type="radio"
                   value="countries"
                   data-aria-controls="conditional-location-2">
            <label class="govuk-label govuk-radios__label" for="location-2">Countries</label>
            <div class="govuk-hint govuk-radios__hint">
              Choose one or more: England, Scotland, Wales or Northern Ireland
            </div>
          </div>

          <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-location-2">
            <div class="govuk-form-group">
              <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="country-england" name="country" type="checkbox" value="England">
                  <label class="govuk-label govuk-checkboxes__label" for="country-england">England</label>
                </div>
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="country-scotland" name="country" type="checkbox" value="Scotland">
                  <label class="govuk-label govuk-checkboxes__label" for="country-scotland">Scotland</label>
                </div>
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="country-wales" name="country" type="checkbox" value="Wales">
                  <label class="govuk-label govuk-checkboxes__label" for="country-wales">Wales</label>
                </div>
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="country-ni" name="country" type="checkbox" value="Northern Ireland">
                  <label class="govuk-label govuk-checkboxes__label" for="country-ni">Northern Ireland</label>
                </div>
              </div>
            </div>
          </div>

       <!-- Local authority -->
<div class="govuk-radios__item">
  <input class="govuk-radios__input"
         id="location-4"
         name="location"
         type="radio"
         value="la"
         data-aria-controls="conditional-location-4">
  <label class="govuk-label govuk-radios__label" for="location-4">Local authority</label>
  <div class="govuk-hint govuk-radios__hint">Add up to 10 local authorities</div>
</div>

<div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-location-4">
  <div class="govuk-form-group">
    <!-- Inline error will be inserted just before this container -->
    <select class="govuk-select" id="la-select" name="la">
      <option value="">Select a local authority</option>
      <!-- OPTION A (static): paste all your LA options here (same list you shared earlier) -->
      <!-- e.g. <option>Cambridgeshire County Council</option> ... -->

      <!-- OPTION B (dynamic): leave only the placeholder above and let the script
           populate from window.ALL_LOCAL_AUTHORITIES if present. -->
    </select>

    <div class="govuk-button-group govuk-!-margin-top-3">
      {{ govukButton({
        text: "Add local authority",
        classes: "govuk-button--secondary",
        attributes: { id: "add-more-locations-button" }
      }) }}
    </div>
  </div>

  <table class="govuk-table govuk-!-margin-top-4" id="location-table" hidden>
    <caption class="govuk-table__caption govuk-table__caption--m">Added local authorities</caption>
    <tbody class="govuk-table__body"></tbody>
  </table>
</div>

        </div>
      </fieldset>
    </div>

    <div class="govuk-button-group">
      {{ govukButton({
        text: "Continue",
        attributes: { id: "add-location-button" }
      }) }}
    </div>

  </div>
</div>

<!-- Page script (enforces "select from list" + no duplicates with inline errors) -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  // ------- SETTINGS -------
  const SELECT_ID     = 'la-select';         // select element id
  const KEY_COUNTRIES = 'selectedCountries';
  const KEY_LA_LIST   = 'selectedLocations';
  const MAX_LAS       = 10;

  // ------- ELEMENTS -------
  const submitButton  = document.getElementById('add-location-button');
  const addMoreButton = document.getElementById('add-more-locations-button');

  const table     = document.getElementById('location-table');
  const tableBody = table.querySelector('tbody');

  const countriesRadio        = document.getElementById('location-2');
  const laRadio               = document.getElementById('location-4');
  const countriesConditional  = document.getElementById('conditional-location-2');
  const laConditional         = document.getElementById('conditional-location-4');

  const laFormGroup =
    document.querySelector('#conditional-location-4 .govuk-form-group') ||
    document.getElementById('conditional-location-4');

  // ------- SELECT + SOURCE LIST -------
  const laSelect = document.getElementById(SELECT_ID);

  // If you provided window.ALL_LOCAL_AUTHORITIES and the select has only the placeholder,
  // populate the options dynamically to avoid pasting a huge list into the template.
  if (laSelect && laSelect.options.length <= 1 && Array.isArray(window.ALL_LOCAL_AUTHORITIES)) {
    const frag = document.createDocumentFragment();
    window.ALL_LOCAL_AUTHORITIES.forEach(label => {
      const opt = document.createElement('option');
      opt.value = label;
      opt.textContent = label;
      frag.appendChild(opt);
    });
    laSelect.appendChild(frag);
  }

  function buildAllowedSetFromSelect() {
    if (!laSelect) return new Set();
    // skip the placeholder at index 0
    return new Set(Array.from(laSelect.options).slice(1).map(o => o.textContent.toLowerCase().trim()));
  }
  function isAllowedLA(value) {
    const allowed = buildAllowedSetFromSelect();
    return allowed.has(String(value || '').toLowerCase().trim());
  }

  // ------- INLINE ERROR HELPERS -------
  function showInlineError(message) {
    if (!laFormGroup) return;
    laFormGroup.classList.add('govuk-form-group--error');

    let err = laFormGroup.querySelector('#la-error');
    if (!err) {
      err = document.createElement('p');
      err.id = 'la-error';
      err.className = 'govuk-error-message';
      const before = laSelect || laFormGroup.firstChild;
      err.innerHTML = '<span class="govuk-visually-hidden">Error:</span> ' + message;
      laFormGroup.insertBefore(err, before);
    } else {
      err.innerHTML = '<span class="govuk-visually-hidden">Error:</span> ' + message;
    }

    if (laSelect) {
      laSelect.setAttribute('aria-invalid', 'true');
      const described = (laSelect.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
      if (!described.includes('la-error')) {
        laSelect.setAttribute('aria-describedby', [...described, 'la-error'].join(' '));
      }
    }
  }

  function clearInlineError() {
    if (!laFormGroup) return;
    laFormGroup.classList.remove('govuk-form-group--error');
    const err = laFormGroup.querySelector('#la-error');
    if (err) err.remove();

    if (laSelect) {
      laSelect.removeAttribute('aria-invalid');
      const described = (laSelect.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
      const pruned = described.filter(x => x !== 'la-error');
      if (pruned.length) laSelect.setAttribute('aria-describedby', pruned.join(' '));
      else laSelect.removeAttribute('aria-describedby');
    }
  }

  if (laSelect) {
    laSelect.addEventListener('change', clearInlineError);
    laSelect.addEventListener('blur',  () => {
      if (!laSelect.value) clearInlineError();
    });
  }

  // ------- STATE -------
  let count = 0;
  const addedLocations = new Set(); // lowercased

  function updateAddButtonLabel() {
    if (!addMoreButton) return;
    addMoreButton.textContent = tableBody.children.length === 0
      ? 'Add local authority'
      : 'Add another local authority';
  }

  function addLocationRow(value) {
    count++;
    addedLocations.add(value.toLowerCase());

    const row = document.createElement('tr');
    row.className = 'govuk-table__row';

    const headerCell = document.createElement('th');
    headerCell.scope = 'row';
    headerCell.className = 'govuk-table__header';
    headerCell.textContent = 'Local authority ' + count;

    const valueCell = document.createElement('td');
    valueCell.className = 'govuk-table__cell';
    valueCell.textContent = value;

    const actionCell = document.createElement('td');
    actionCell.className = 'govuk-table__cell';

    const removeLink = document.createElement('a');
    removeLink.href = '#';
    removeLink.className = 'govuk-link';
    removeLink.textContent = 'Remove';
    removeLink.addEventListener('click', function (e) {
      e.preventDefault();
      row.remove();
      addedLocations.delete(value.toLowerCase());
      if (tableBody.children.length === 0) {
        table.hidden = true;
        count = 0;
      }
      clearInlineError();
      updateAddButtonLabel();
    });

    actionCell.appendChild(removeLink);
    row.appendChild(headerCell);
    row.appendChild(valueCell);
    row.appendChild(actionCell);
    tableBody.appendChild(row);

    table.hidden = false;
    updateAddButtonLabel();
  }

  // ------- RESTORE FROM SESSION (optional; keeps parity with your JS path) -------
  const savedCountries = sessionStorage.getItem(KEY_COUNTRIES);
  const savedLAList    = sessionStorage.getItem(KEY_LA_LIST);
  const savedUK        = sessionStorage.getItem('selectedLocation'); // legacy single value

  if (savedCountries) {
    countriesRadio.checked = true;
    countriesConditional.classList.remove('govuk-radios__conditional--hidden');
  } else if (savedLAList) {
    laRadio.checked = true;
    laConditional.classList.remove('govuk-radios__conditional--hidden');
    try {
      const locations = JSON.parse(savedLAList);
      locations.slice(0, MAX_LAS).forEach(value => addLocationRow(value));
    } catch {}
  } else if (savedUK === 'United Kingdom') {
    countriesRadio.checked = true;
    countriesConditional.classList.remove('govuk-radios__conditional--hidden');
    ['country-england','country-scotland','country-wales','country-ni'].forEach(id => {
      const cb = document.getElementById(id);
      if (cb) cb.checked = true;
    });
  }

  laRadio.addEventListener('change', updateAddButtonLabel);
  updateAddButtonLabel();

  // ------- ADD MORE (select-based validation + 10 limit; button stays enabled) -------
  if (addMoreButton) {
    addMoreButton.addEventListener('click', function (e) {
      e.preventDefault();

      const current = tableBody.children.length;
      if (current >= MAX_LAS) {
        showInlineError('You can only add up to 10 local authorities');
        return;
      }

      if (!laSelect) return;

      const value = (laSelect.value || '').trim();
      const label = value; // we use visible label/value the same
      const lower = label.toLowerCase();

      if (!value) {
        showInlineError('Select a local authority');
        return;
      }
      if (!isAllowedLA(label)) {
        showInlineError('Select a local authority from the list');
        return;
      }
      if (addedLocations.has(lower)) {
        showInlineError('This local authority has already been added');
        return;
      }

      clearInlineError();
      addLocationRow(label);

      // reset select back to the placeholder
      laSelect.selectedIndex = 0;
      laSelect.dispatchEvent(new Event('change', { bubbles: true }));
    });
  }

  // ------- SUBMIT -------
  submitButton.addEventListener('click', function (e) {
    e.preventDefault();

    const selectedRadio = document.querySelector('input[name="location"]:checked');
    if (!selectedRadio) {
      const first = document.getElementById('location-2') || document.getElementById('location-4');
      if (first) first.focus();
      alert('Please select Countries or Local authority.');
      return;
    }

    // Clear mutually exclusive keys
    sessionStorage.removeItem('selectedLocation');  // legacy
    sessionStorage.removeItem(KEY_LA_LIST);
    sessionStorage.removeItem(KEY_COUNTRIES);

    if (selectedRadio.id === 'location-2') {
      // Countries path
      const checked = Array.from(document.querySelectorAll('input[name="country"]:checked'))
        .map(cb => cb.value.trim());
      if (checked.length === 0) {
        alert('Please select at least one country.');
        return;
      }
      sessionStorage.setItem(KEY_COUNTRIES, JSON.stringify(checked));

    } else if (selectedRadio.id === 'location-4') {
      // Local authority path
      let locations = [];

      if (!table.hidden && tableBody.children.length > 0) {
        const rows = tableBody.querySelectorAll('tr');
        rows.forEach(row => {
          const name = row.querySelector('td')?.textContent?.trim();
          if (name) locations.push(name);
        });
      } else {
        // Allow continuing with a single selection if they didn't press "Add"
        const value = (laSelect && laSelect.value.trim()) || '';
        if (!value) {
          showInlineError('Add at least one local authority');
          return;
        }
        if (!isAllowedLA(value)) {
          showInlineError('Select a local authority from the list');
          return;
        }
        locations.push(value);
      }

      if (locations.length > MAX_LAS) {
        showInlineError('You can only add up to 10 local authorities');
        return;
      }

      // Final revalidate + de-dupe
      const unique = [];
      const seen = new Set();
      for (const v of locations) {
        const l = v.toLowerCase();
        if (!isAllowedLA(v)) {
          showInlineError('Select a local authority from the list');
          return;
        }
        if (seen.has(l)) {
          showInlineError('This local authority has already been added');
          return;
        }
        seen.add(l);
        unique.push(v);
      }

      sessionStorage.setItem(KEY_LA_LIST, JSON.stringify(unique));
    }

    // Back to summary
    window.location.href = 'create-pollutant.html';
  });
});
</script>
<script>
window.ALL_LOCAL_AUTHORITIES = [
  // ---------------------------
  // ENGLAND — COUNTY COUNCILS
  // ---------------------------
  'Cambridgeshire County Council',
  'Derbyshire County Council',
  'Devon County Council',
  'East Sussex County Council',
  'Essex County Council',
  'Gloucestershire County Council',
  'Hampshire County Council',
  'Hertfordshire County Council',
  'Kent County Council',
  'Lancashire County Council',
  'Leicestershire County Council',
  'Lincolnshire County Council',
  'Norfolk County Council',
  'Nottinghamshire County Council',
  'Oxfordshire County Council',
  'Staffordshire County Council',
  'Suffolk County Council',
  'Surrey County Council',
  'Warwickshire County Council',
  'West Sussex County Council',
  'Worcestershire County Council',

  // ----------------------------------------------------------
  // ENGLAND — UNITARY AUTHORITIES (incl. City & Isles of Scilly)
  // ----------------------------------------------------------
  'Bath and North East Somerset Council',
  'Bedford Borough Council',
  'Blackburn with Darwen Borough Council',
  'Blackpool Council',
  'Bournemouth, Christchurch and Poole Council',
  'Bracknell Forest Borough Council',
  'Brighton & Hove City Council',
  'Bristol City Council',
  'Buckinghamshire Council',
  'Central Bedfordshire Council',
  'Cheshire East Council',
  'Cheshire West and Chester Council',
  'Cornwall Council',
  'Darlington Borough Council',
  'Derby City Council',
  'Dorset Council',
  'Durham County Council',
  'East Riding of Yorkshire Council',
  'Herefordshire Council',
  'Hartlepool Borough Council',
  'Isle of Wight Council',
  'Kingston upon Hull City Council',
  'Leicester City Council',
  'Luton Borough Council',
  'Medway Council',
  'Middlesbrough Council',
  'Milton Keynes City Council',
  'North East Lincolnshire Council',
  'North Lincolnshire Council',
  'North Somerset Council',
  'Northumberland County Council',
  'Nottingham City Council',
  'Peterborough City Council',
  'Plymouth City Council',
  'Portsmouth City Council',
  'Reading Borough Council',
  'Redcar and Cleveland Borough Council',
  'Rutland County Council',
  'Shropshire Council',
  'Slough Borough Council',
  'Somerset Council',
  'South Gloucestershire Council',
  'Southampton City Council',
  'Southend-on-Sea City Council',
  'Stockton-on-Tees Borough Council',
  'Stoke-on-Trent City Council',
  'Swindon Borough Council',
  'Telford and Wrekin Council',
  'Thurrock Council',
  'Torbay Council',
  'Warrington Borough Council',
  'West Berkshire Council',
  'West Northamptonshire Council',
  'Westmorland and Furness Council',
  'Wiltshire Council',
  'Windsor and Maidenhead Borough Council',
  'Wokingham Borough Council',
  'City of York Council',
  'Cumberland Council',
  'North Yorkshire Council',
  'City of London Corporation',
  'Council of the Isles of Scilly',

  // ---------------------------------
  // ENGLAND — LONDON BOROUGH COUNCILS
  // ---------------------------------
  'Barking and Dagenham London Borough Council',
  'Barnet London Borough Council',
  'Bexley London Borough Council',
  'Brent London Borough Council',
  'Bromley London Borough Council',
  'Camden London Borough Council',
  'Croydon London Borough Council',
  'Ealing London Borough Council',
  'Enfield London Borough Council',
  'Greenwich London Borough Council',
  'Hackney London Borough Council',
  'Hammersmith and Fulham London Borough Council',
  'Haringey London Borough Council',
  'Harrow London Borough Council',
  'Havering London Borough Council',
  'Hillingdon London Borough Council',
  'Hounslow London Borough Council',
  'Islington London Borough Council',
  'Kensington and Chelsea London Borough Council',
  'Kingston upon Thames London Borough Council',
  'Lambeth London Borough Council',
  'Lewisham London Borough Council',
  'Merton London Borough Council',
  'Newham London Borough Council',
  'Redbridge London Borough Council',
  'Richmond upon Thames London Borough Council',
  'Southwark London Borough Council',
  'Sutton London Borough Council',
  'Tower Hamlets London Borough Council',
  'Waltham Forest London Borough Council',
  'Wandsworth London Borough Council',
  'Westminster City Council',

  // ----------------------------------------------
  // ENGLAND — METROPOLITAN BOROUGH (MET DISTRICTS)
  // ----------------------------------------------
  'Barnsley Metropolitan Borough Council',
  'Birmingham City Council',
  'Bolton Metropolitan Borough Council',
  'Bradford City Council',
  'Bury Metropolitan Borough Council',
  'Calderdale Metropolitan Borough Council',
  'Coventry City Council',
  'Doncaster Metropolitan Borough Council',
  'Dudley Metropolitan Borough Council',
  'Gateshead Metropolitan Borough Council',
  'Kirklees Metropolitan Borough Council',
  'Knowsley Metropolitan Borough Council',
  'Leeds City Council',
  'Liverpool City Council',
  'Manchester City Council',
  'Newcastle upon Tyne City Council',
  'North Tyneside Metropolitan Borough Council',
  'Oldham Metropolitan Borough Council',
  'Rochdale Metropolitan Borough Council',
  'Rotherham Metropolitan Borough Council',
  'Salford City Council',
  'Sandwell Metropolitan Borough Council',
  'Sefton Metropolitan Borough Council',
  'Sheffield City Council',
  'Solihull Metropolitan Borough Council',
  'South Tyneside Metropolitan Borough Council',
  'Sunderland City Council',
  'Tameside Metropolitan Borough Council',
  'Trafford Metropolitan Borough Council',
  'Wakefield Council',
  'Walsall Metropolitan Borough Council',
  'Wirral Metropolitan Borough Council',
  'Wolverhampton City Council',
  'Stockport Metropolitan Borough Council',
  'Wigan Metropolitan Borough Council',
  'Southampton City Council', // (unitary, already listed above; keep metro list to 36 lines if you prefer strict separation)

  // -------------------------------------------------------------------
  // ENGLAND — NON-METROPOLITAN DISTRICTS / BOROUGH & CITY COUNCILS (164)
  // (these are the lower-tier councils in two-tier county areas)
  // -------------------------------------------------------------------
  // Buckinghamshire is unitary (no districts)
  // Berkshire is all unitary (no districts)

  // Cambridgeshire
  'Cambridge City Council',
  'East Cambridgeshire District Council',
  'Fenland District Council',
  'Huntingdonshire District Council',
  'South Cambridgeshire District Council',

  // Derbyshire
  'Amber Valley Borough Council',
  'Bolsover District Council',
  'Chesterfield Borough Council',
  'Derbyshire Dales District Council',
  'Erewash Borough Council',
  'High Peak Borough Council',
  'North East Derbyshire District Council',
  'South Derbyshire District Council',

  // Devon
  'East Devon District Council',
  'Exeter City Council',
  'Mid Devon District Council',
  'North Devon Council',
  'South Hams District Council',
  'Teignbridge District Council',
  'Torridge District Council',
  'West Devon Borough Council',

  // East Sussex
  'Eastbourne Borough Council',
  'Hastings Borough Council',
  'Lewes District Council',
  'Rother District Council',
  'Wealden District Council',

  // Essex
  'Basildon Borough Council',
  'Braintree District Council',
  'Brentwood Borough Council',
  'Castle Point Borough Council',
  'Chelmsford City Council',
  'Colchester City Council',
  'Epping Forest District Council',
  'Harlow District Council',
  'Maldon District Council',
  'Rochford District Council',
  'Tendring District Council',
  'Uttlesford District Council',

  // Gloucestershire
  'Cheltenham Borough Council',
  'Cotswold District Council',
  'Forest of Dean District Council',
  'Gloucester City Council',
  'Stroud District Council',
  'Tewkesbury Borough Council',

  // Hampshire (excluding the unitary cities)
  'Basingstoke and Deane Borough Council',
  'East Hampshire District Council',
  'Eastleigh Borough Council',
  'Fareham Borough Council',
  'Gosport Borough Council',
  'Hart District Council',
  'Havant Borough Council',
  'New Forest District Council',
  'Rushmoor Borough Council',
  'Test Valley Borough Council',
  'Winchester City Council',

  // Hertfordshire
  'Broxbourne Borough Council',
  'Dacorum Borough Council',
  'East Hertfordshire District Council',
  'Hertsmere Borough Council',
  'North Hertfordshire Council',
  'St Albans City and District Council',
  'Stevenage Borough Council',
  'Three Rivers District Council',
  'Watford Borough Council',
  'Welwyn Hatfield Borough Council',

  // Kent (excluding the unitary Medway)
  'Ashford Borough Council',
  'Canterbury City Council',
  'Dartford Borough Council',
  'Dover District Council',
  'Folkestone & Hythe District Council',
  'Gravesham Borough Council',
  'Maidstone Borough Council',
  'Sevenoaks District Council',
  'Swale Borough Council',
  'Thanet District Council',
  'Tonbridge and Malling Borough Council',
  'Tunbridge Wells Borough Council',

  // Lancashire (excluding Blackburn & Blackpool unitary)
  'Burnley Borough Council',
  'Chorley Council',
  'Fylde Council',
  'Hyndburn Borough Council',
  'Lancaster City Council',
  'Pendle Borough Council',
  'Preston City Council',
  'Ribble Valley Borough Council',
  'Rossendale Borough Council',
  'South Ribble Borough Council',
  'West Lancashire Borough Council',
  'Wyre Council',

  // Leicestershire (excluding Leicester unitary)
  'Blaby District Council',
  'Charnwood Borough Council',
  'Harborough District Council',
  'Hinckley & Bosworth Borough Council',
  'Melton Borough Council',
  'North West Leicestershire District Council',
  'Oadby and Wigston Borough Council',

  // Lincolnshire (excluding the two unitary Lincs)
  'Boston Borough Council',
  'East Lindsey District Council',
  'City of Lincoln Council',
  'North Kesteven District Council',
  'South Holland District Council',
  'South Kesteven District Council',
  'West Lindsey District Council',

  // Norfolk
  'Breckland Council',
  'Broadland District Council',
  'Great Yarmouth Borough Council',
  'King’s Lynn and West Norfolk Borough Council',
  'North Norfolk District Council',
  'Norwich City Council',
  'South Norfolk Council',

  // Nottinghamshire (excluding Nottingham unitary)
  'Ashfield District Council',
  'Bassetlaw District Council',
  'Broxtowe Borough Council',
  'Gedling Borough Council',
  'Mansfield District Council',
  'Newark and Sherwood District Council',
  'Rushcliffe Borough Council',

  // Oxfordshire
  'Cherwell District Council',
  'Oxford City Council',
  'South Oxfordshire District Council',
  'Vale of White Horse District Council',
  'West Oxfordshire District Council',

  // Staffordshire (excluding Stoke-on-Trent unitary)
  'Cannock Chase District Council',
  'East Staffordshire Borough Council',
  'Lichfield District Council',
  'Newcastle-under-Lyme Borough Council',
  'South Staffordshire Council',
  'Stafford Borough Council',
  'Staffordshire Moorlands District Council',
  'Tamworth Borough Council',

  // Suffolk
  'Babergh District Council',
  'East Suffolk Council',
  'Ipswich Borough Council',
  'Mid Suffolk District Council',
  'West Suffolk Council',

  // Surrey
  'Elmbridge Borough Council',
  'Epsom and Ewell Borough Council',
  'Guildford Borough Council',
  'Mole Valley District Council',
  'Reigate & Banstead Borough Council',
  'Runnymede Borough Council',
  'Spelthorne Borough Council',
  'Surrey Heath Borough Council',
  'Tandridge District Council',
  'Waverley Borough Council',
  'Woking Borough Council',

  // Warwickshire
  'North Warwickshire Borough Council',
  'Nuneaton and Bedworth Borough Council',
  'Rugby Borough Council',
  'Stratford-on-Avon District Council',
  'Warwick District Council',

  // West Sussex
  'Adur District Council',
  'Arun District Council',
  'Chichester District Council',
  'Crawley Borough Council',
  'Horsham District Council',
  'Mid Sussex District Council',
  'Worthing Borough Council',

  // Worcestershire
  'Bromsgrove District Council',
  'Malvern Hills District Council',
  'Redditch Borough Council',
  'Worcester City Council',
  'Wychavon District Council',
  'Wyre Forest District Council',

  // (No districts in: North Yorkshire (unitary), Cumbria (2 unitaries), Somerset (unitary),
  // Northamptonshire (2 unitaries), Wiltshire (unitary), Dorset (unitary),
  // Shropshire (unitary), Berkshire (all unitaries), Buckinghamshire (unitary),
  // Cornwall/Durham/Northumberland (unitaries), etc.)

  // ----------
  // SCOTLAND
  // ----------
  'Aberdeen City Council',
  'Aberdeenshire Council',
  'Angus Council',
  'Argyll and Bute Council',
  'City of Edinburgh Council',
  'Clackmannanshire Council',
  'Dumfries and Galloway Council',
  'Dundee City Council',
  'East Ayrshire Council',
  'East Dunbartonshire Council',
  'East Lothian Council',
  'East Renfrewshire Council',
  'Falkirk Council',
  'Fife Council',
  'Glasgow City Council',
  'Highland Council',
  'Inverclyde Council',
  'Midlothian Council',
  'Moray Council',
  'Na h-Eileanan Siar Council',
  'North Ayrshire Council',
  'North Lanarkshire Council',
  'Orkney Islands Council',
  'Perth and Kinross Council',
  'Renfrewshire Council',
  'Scottish Borders Council',
  'Shetland Islands Council',
  'South Ayrshire Council',
  'South Lanarkshire Council',
  'Stirling Council',
  'West Dunbartonshire Council',
  'West Lothian Council',

  // -----
  // WALES
  // -----
  'Blaenau Gwent County Borough Council',
  'Bridgend County Borough Council',
  'Caerphilly County Borough Council',
  'Cardiff Council',
  'Carmarthenshire County Council',
  'Ceredigion County Council',
  'Conwy County Borough Council',
  'Denbighshire County Council',
  'Flintshire County Council',
  'Gwynedd Council',
  'Isle of Anglesey County Council',
  'Merthyr Tydfil County Borough Council',
  'Monmouthshire County Council',
  'Neath Port Talbot County Borough Council',
  'Newport City Council',
  'Pembrokeshire County Council',
  'Powys County Council',
  'Rhondda Cynon Taf County Borough Council',
  'Swansea Council',
  'Torfaen County Borough Council',
  'Vale of Glamorgan Council',
  'Wrexham County Borough Council',

  // -------------------
  // NORTHERN IRELAND (11)
  // -------------------
  'Antrim and Newtownabbey Borough Council',
  'Ards and North Down Borough Council',
  'Armagh City, Banbridge and Craigavon Borough Council',
  'Belfast City Council',
  'Causeway Coast and Glens Borough Council',
  'Derry City and Strabane District Council',
  'Fermanagh and Omagh District Council',
  'Lisburn and Castlereagh City Council',
  'Mid and East Antrim Borough Council',
  'Mid Ulster District Council',
  'Newry, Mourne and Down District Council'
  
];
</script>



{% endblock %}
